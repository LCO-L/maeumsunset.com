<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SunSet ¬∑ Campfire Prototype</title>
  <style>
    :root{
      /* palette ‚Äì warm fire on deep brown */
      --bg-900:#120a07;  /* page background */
      --bg-850:#170d09;
      --bg-800:#1a0f0a;  /* panel background */
      --bg-750:#22140d;
      --panel:#1f130d;   /* card background */
      --panel-2:#24170f; 
      --text:#e8dccf;    /* primary text */
      --muted:#c7b8a7;   /* secondary text */
      --accent:#ff8a3c;  /* fire orange */
      --accent-2:#ffb36a;/* warm highlight */
      --accent-3:#ff6a00;/* deep fire */
      --shadow:0 12px 30px rgba(0,0,0,.35);
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text); background: radial-gradient(1200px 800px at 50% 120%, #2a150c, var(--bg-900));
      letter-spacing:.1px;
    }
    a{color:inherit; text-decoration:none}
    .app{max-width:820px; margin:0 auto; min-height:100%; display:flex; flex-direction:column}
    header{
      position:sticky; top:0; z-index:5; backdrop-filter:saturate(120%) blur(8px);
      background:linear-gradient(180deg, rgba(26,15,10,.9), rgba(26,15,10,.65));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .topbar{display:flex; align-items:center; gap:12px; padding:14px 18px}
    .logo{display:flex; align-items:center; gap:10px; font-weight:700; font-size:18px}
    .flame{width:22px; height:22px}
    .pill{margin-left:auto; padding:6px 10px; border-radius:999px; font-size:12px; color:#2b170c; background:linear-gradient(180deg,var(--accent-2),var(--accent)); font-weight:700}

    main{flex:1; padding:22px; display:grid;}
    section{display:none;}
    section.active{display:block;}

    .card{background:linear-gradient(180deg, var(--panel), var(--panel-2)); border:1px solid rgba(255,255,255,.05); border-radius:var(--radius); box-shadow:var(--shadow)}

    /* home */
    .home-grid{display:grid; grid-template-columns:1fr; gap:16px}
    @media (min-width:640px){.home-grid{grid-template-columns:1.3fr .7fr}}
    .question-card{padding:18px}
    .q-title{font-size:14px; color:var(--muted); margin:0 0 8px}
    .q-body{font-size:18px; line-height:1.4; margin:0 0 16px}
    .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .btn{cursor:pointer; border:0; color:#2b170c; background:linear-gradient(180deg, var(--accent-2), var(--accent)); padding:10px 14px; border-radius:12px; font-weight:700}
    .btn.ghost{background:transparent; color:var(--text); border:1px solid rgba(255,255,255,.14)}

    /* editor */
    .editor{padding:18px; display:grid; gap:12px}
    textarea{
      width:100%; min-height:160px; resize:vertical; border-radius:14px; border:1px solid rgba(255,255,255,.08);
      background:rgba(255,255,255,.02); color:var(--text); padding:14px; line-height:1.5; outline:none;
      box-shadow:inset 0 0 0 1px rgba(0,0,0,.2);
    }
    .hint{font-size:12px; color:var(--muted)}

    /* summary */
    .summary{padding:18px; display:grid; gap:14px}
    .kv{display:grid; grid-template-columns:140px 1fr; gap:10px; align-items:start}
    .chip{display:inline-flex; gap:6px; align-items:center; padding:6px 10px; border-radius:999px; background:rgba(255,138,60,.12); color:#ffd9b4; border:1px solid rgba(255,138,60,.25); font-size:12px; margin-right:6px}

    /* map */
    .map{padding:18px}
    .map-wrap{height:360px; position:relative; background: radial-gradient(600px 260px at 50% 130%, #2b160d, #170d09); border-radius:16px; border:1px solid rgba(255,255,255,.04)}
    .flame-pin{position:absolute; transform:translate(-50%, -50%); cursor:pointer; transition:transform .12s ease}
    .flame-pin:hover{transform:translate(-50%,-50%) scale(1.06)}

    /* campfire chat */
    .campfire{padding:0}
    .campfire-head{padding:18px 22px}
    .countdown{color:#ffcf99; font-size:12px; opacity:.9}
    .chat{display:grid; gap:14px; padding:0 22px 22px}
    .msg{background:linear-gradient(180deg, #24160f, #1d120c); border:1px solid rgba(255,255,255,.06); border-radius:18px; padding:14px 16px; box-shadow:var(--shadow)}
    .name{color:var(--accent-2); font-weight:700; margin-bottom:6px}
    .mood{margin-top:8px; color:#ffd9b4; font-size:12px}
    .inputbar{position:sticky; bottom:0; background:linear-gradient(180deg, rgba(18,10,7,0), var(--bg-900)); padding:12px 22px 22px}
    .inputrow{display:flex; gap:10px}
    .textin{flex:1; border-radius:999px; background:rgba(255,255,255,.06); color:var(--text); border:1px solid rgba(255,255,255,.12); padding:12px 14px}

    /* footer */
    footer{position:sticky; bottom:0; background:linear-gradient(180deg, rgba(18,10,7,.2), rgba(18,10,7,.95)); border-top:1px solid rgba(255,255,255,.06)}
    .nav{display:flex; justify-content:space-around; padding:10px}
    .nav button{background:transparent; border:0; color:var(--muted); font-weight:700; padding:10px 12px; border-radius:10px}
    .nav button.active{color:var(--text); background:rgba(255,255,255,.06)}

    /* tiny helpers */
    .sr{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="topbar">
        <div class="logo" aria-label="SunSet logo">
          <svg class="flame" viewBox="0 0 24 24" aria-hidden="true"><path fill="url(#g)" d="M12 2c1.5 3.2-1 4.4-1 7 0 1.6 1.5 2.8 3.2 2.2C14 13 13 15 10.7 15 8 15 6 12.9 6 10.5 6 6.7 9.3 5 12 2z"/><defs><linearGradient id="g" x1="0" x2="1" y1="0" y2="1"><stop offset="0" stop-color="#ffb36a"/><stop offset="1" stop-color="#ff6a00"/></linearGradient></defs></svg>
          <span>SunSet</span>
        </div>
        <span class="pill">MVP</span>
      </div>
    </header>

    <main>
      <!-- HOME -->
      <section id="home" class="active">
        <div class="home-grid">
          <article class="card question-card">
            <p class="q-title">Today‚Äôs question</p>
            <p class="q-body" id="qText">What felt heavier than usual today?</p>
            <div class="row">
              <button class="btn" data-nav="editor">Write diary</button>
              <button class="btn ghost" data-nav="map">Campfire map</button>
            </div>
          </article>

          <aside class="card" style="padding:18px">
            <p class="q-title">My status</p>
            <div class="chip" title="Visibility">Anonymous cluster</div>
            <div class="chip" title="Mood">üå´ foggy</div>
          </aside>
        </div>
      </section>

      <!-- EDITOR -->
      <section id="editor" class="card editor">
        <div class="hint">Writing to: <strong id="qText2">What felt heavier than usual today?</strong></div>
        <textarea id="entry" placeholder="Write freely‚Ä¶"></textarea>
        <div class="row">
          <button class="btn" data-nav="summary">AI summary</button>
          <button class="btn ghost" data-nav="visibility">Set visibility</button>
        </div>
      </section>

      <!-- VISIBILITY -->
      <section id="visibility" class="card editor" aria-labelledby="visLabel">
        <h3 id="visLabel" style="margin:0">Set visibility</h3>
        <label><input type="radio" name="vis" value="private"> Only me</label>
        <label><input type="radio" name="vis" value="friends"> Friends</label>
        <label><input type="radio" name="vis" value="cluster" checked> Anonymous cluster</label>
        <label><input type="radio" name="vis" value="public"> Public</label>
        <div class="row"><button class="btn" data-nav="editor">Confirm</button></div>
      </section>

      <!-- SUMMARY -->
      <section id="summary" class="card summary">
        <h3 style="margin:0">AI Summary</h3>
        <div class="kv"><div>Summary</div><div id="sumText">You felt cloudy and disconnected, craving quiet and gentle connection.</div></div>
        <div class="kv"><div>Keywords</div><div>
          <span class="chip">üå´ foggy</span>
          <span class="chip">üåô low energy</span>
          <span class="chip">ü§ù seeking connection</span>
        </div></div>
        <div class="row"><button class="btn" data-nav="map">Go to campfire map</button></div>
      </section>

      <!-- MAP -->
      <section id="map" class="card map">
        <h3 style="margin:6px 0 10px">Campfire map</h3>
        <div class="map-wrap" id="mapWrap" aria-label="Three clusters">
          <!-- three pinned flames -->
          <div class="flame-pin" style="left:26%; top:62%" data-cluster="A" title="Reflective ¬∑ 42 participants">üî∏</div>
          <div class="flame-pin" style="left:54%; top:36%" data-cluster="B" title="Sensitive ¬∑ 38 participants">üî∂</div>
          <div class="flame-pin" style="left:74%; top:68%" data-cluster="C" title="Calm ¬∑ 51 participants">üü†</div>
        </div>
        <div class="row" style="margin-top:12px"><button class="btn" data-nav="campfire">Open selected campfire</button><button class="btn ghost" data-nav="home">Back</button></div>
      </section>

      <!-- CAMPFIRE CHAT -->
      <section id="campfire" class="card campfire">
        <div class="campfire-head">
          <div class="row" style="justify-content:space-between">
            <div class="logo"><svg class="flame" viewBox="0 0 24 24" aria-hidden="true"><path fill="url(#g)" d="M12 2c1.5 3.2-1 4.4-1 7 0 1.6 1.5 2.8 3.2 2.2C14 13 13 15 10.7 15 8 15 6 12.9 6 10.5 6 6.7 9.3 5 12 2z"/></svg><strong>Campfire</strong></div>
            <div class="countdown"><span id="timeLeft">--:--:--</span> left before this fire fades</div>
          </div>
        </div>
        <div class="chat" id="chat">
          <div class="msg"><div class="name">Emily</div><div>I‚Äôve been feeling disconnected lately. Not sure why.</div><div class="mood">[Mood: üå´ foggy]</div></div>
          <div class="msg"><div class="name">Anniel</div><div>Maybe it‚Äôs the weather‚Ä¶ I journaled about this yesterday.</div><div class="mood">[Mood: ‚ú® reflective]</div></div>
          <div class="msg"><div class="name">Alex</div><div>Same here. I‚Äôve been craving silence, but also connection.</div><div class="mood">[Mood: ü´ß sensitive]</div></div>
          <div class="msg"><div class="name">Mia</div><div>Let‚Äôs call it a shared pause. And honor it.</div><div class="mood">[Mood: üåø calm]</div></div>
        </div>
        <div class="inputbar">
          <div class="inputrow">
            <input class="textin" id="msgInput" placeholder="Type your message‚Ä¶" aria-label="Type your message" />
            <button class="btn" id="send">Send</button>
            <button class="btn ghost" data-nav="home">Done</button>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <nav class="nav" aria-label="Primary">
        <button data-nav="home" class="active">Home</button>
        <button data-nav="editor">Write</button>
        <button data-nav="map">Campfire</button>
      </nav>
    </footer>
  </div>

  <script>
    // tiny view router
    const sections = Array.from(document.querySelectorAll('main section'));
    const navButtons = Array.from(document.querySelectorAll('[data-nav]'));
    function go(id){
      sections.forEach(s=>s.classList.toggle('active', s.id===id));
      navButtons.forEach(b=>b.classList.toggle('active', b.dataset.nav===id));
      location.hash = id;
    }
    navButtons.forEach(b=>b.addEventListener('click', ()=>go(b.dataset.nav)));
    window.addEventListener('hashchange', ()=>{
      const id = location.hash.replace('#','')||'home';
      if(document.getElementById(id)) go(id);
    });
    // default route
    go(location.hash.replace('#','')||'home');

    // simple countdown: 23h from now (demo)
    const end = Date.now()+23*3600*1000+58*60*1000+43*1000; // mimic screenshot timing
    const elTime = document.getElementById('timeLeft');
    function tick(){
      const left = Math.max(0, end - Date.now());
      const h = String(Math.floor(left/3600000)).padStart(2,'0');
      const m = String(Math.floor((left%3600000)/60000)).padStart(2,'0');
      const s = String(Math.floor((left%60000)/1000)).padStart(2,'0');
      elTime.textContent = `${h}:${m}:${s}`;
      if(left>0) requestAnimationFrame(tick);
    }
    tick();

    // campfire map selection (stores to state)
    let selectedCluster = 'A';
    document.querySelectorAll('.flame-pin').forEach(pin=>{
      pin.addEventListener('click', ()=>{
        selectedCluster = pin.dataset.cluster;
        pin.style.filter='drop-shadow(0 0 10px rgba(255,138,60,.8))';
        setTimeout(()=>pin.style.filter='', 400);
      });
    });

    // fake AI summary generation from textarea (tiny demo)
    const entry = document.getElementById('entry');
    const sumText = document.getElementById('sumText');
    document.querySelector('[data-nav="summary"]').addEventListener('click', ()=>{
      const t = entry.value.trim();
      if(t.length>20){
        sumText.textContent = 'You seem thoughtful today. Core theme: gentle fatigue and a wish for quiet connection.';
      } else {
        sumText.textContent = 'You felt cloudy and disconnected, craving quiet and gentle connection.';
      }
    });

    // chat sending ‚Äì appends message locally
    const chat = document.getElementById('chat');
    document.getElementById('send').addEventListener('click', ()=>{
      const v = document.getElementById('msgInput').value.trim();
      if(!v) return;
      const wrap = document.createElement('div');
      wrap.className='msg';
      wrap.innerHTML = `<div class="name">You</div><div>${escapeHtml(v)}</div><div class="mood">[Mood: üî∏ present]</div>`;
      chat.appendChild(wrap);
      document.getElementById('msgInput').value='';
      chat.scrollTo({top:chat.scrollHeight, behavior:'smooth'});
    });
    function escapeHtml(str){
      return str.replace(/[&<>"']/g, s=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[s]));
    }
  </script>
</body>
</html>
