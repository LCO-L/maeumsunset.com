<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SunSet · 노트형 캠프파이어 프로토타입</title>
<style>
:root {
  --bg:#faf7f0;
  --paper:#fffef9;
  --ink:#4b3d33;
  --accent:#ffd36e;
  --accent-dark:#ffb347;
  --border:#e6dfd3;
}
* { box-sizing:border-box; }
body {
  margin:0;
  font-family: 'Nanum Myeongjo', serif;
  background: var(--bg) url('https://www.transparenttextures.com/patterns/notebook.png');
  color: var(--ink);
}
.app {
  max-width: 800px;
  margin: 0 auto;
  display:flex;
  flex-direction:column;
  min-height:100vh;
}
header, footer {
  background: rgba(255,255,255,0.9);
  border-bottom:1px solid var(--border);
  padding:10px 16px;
}
header h1 {
  font-size: 20px;
  margin:0;
}
main { flex:1; padding:16px; }
section { display:none; }
section.active { display:block; }
.card {
  background: var(--paper);
  border: 1px solid var(--border);
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  border-radius:8px;
  padding:16px;
  margin-bottom:16px;
}
button {
  cursor:pointer;
  padding:8px 14px;
  border:none;
  border-radius:6px;
  font-weight:bold;
}
.btn-primary {
  background: linear-gradient(var(--accent), var(--accent-dark));
  color: var(--ink);
}
.btn-secondary {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--ink);
}
textarea {
  width:100%;
  border:none;
  border-bottom:2px solid #d9c7a6;
  background:transparent;
  font-size:16px;
  line-height:1.8;
  resize:none;
  outline:none;
}
.flame {
  cursor:pointer;
  font-size:24px;
  transition: transform 0.1s ease;
}
.flame.selected { transform: scale(1.2); }
.msg {
  border-left:4px solid #ffd59e;
  padding:8px 12px;
  margin-bottom:10px;
}
.name { font-weight:bold; color:#d48806; }
.navbar {
  display:flex;
  justify-content:space-around;
}
.navbar button.active {
  border-bottom:2px solid var(--accent-dark);
}
</style>
</head>
<body>
<div class="app">
<header>
  <h1>SunSet</h1>
</header>
<main>
  <!-- 홈 -->
  <section id="home" class="active">
    <div class="card">
      <p><strong>오늘의 질문</strong></p>
      <p id="qText">오늘은 무엇이 평소보다 무겁게 느껴졌나요?</p>
      <button class="btn-primary" data-nav="editor">일기 쓰기</button>
      <button class="btn-secondary" data-nav="map">캠프파이어 맵</button>
    </div>
  </section>

  <!-- 일기 작성 -->
  <section id="editor" class="card">
    <p>질문: <span id="qText2">오늘은 무엇이 평소보다 무겁게 느껴졌나요?</span></p>
    <textarea id="entry" placeholder="여기에 오늘의 이야기를 적어주세요…"></textarea>
    <br><br>
    <button class="btn-primary" data-nav="summary">AI 요약</button>
    <button class="btn-secondary" data-nav="visibility">공개 범위 설정</button>
  </section>

  <!-- 공개 범위 -->
  <section id="visibility" class="card">
    <p><strong>공개 범위 설정</strong></p>
    <label><input type="radio" name="vis" value="나만 보기"> 나만 보기</label><br>
    <label><input type="radio" name="vis" value="친구 공개"> 친구 공개</label><br>
    <label><input type="radio" name="vis" value="익명 클러스터" checked> 익명 클러스터</label><br>
    <label><input type="radio" name="vis" value="전체 공개"> 전체 공개</label><br><br>
    <button class="btn-primary" data-nav="editor">확인</button>
  </section>

  <!-- AI 요약 -->
  <section id="summary" class="card">
    <p><strong>AI 요약</strong></p>
    <p id="sumText">당신은 흐리고 단절된 기분을 느꼈으며, 조용하고 부드러운 연결을 원했습니다.</p>
    <p><strong>키워드:</strong> 🌫 흐림, 🌙 기운 없음, 🤝 연결 희망</p>
    <button class="btn-primary" data-nav="map">캠프파이어 맵으로</button>
  </section>

  <!-- 맵 -->
  <section id="map" class="card">
    <p><strong>캠프파이어 맵</strong></p>
    <div>
      <span class="flame" data-cluster="A">🔥</span>
      <span class="flame" data-cluster="B">🔥</span>
      <span class="flame" data-cluster="C">🔥</span>
    </div>
    <br>
    <button class="btn-primary" id="openCampfire">선택한 캠프파이어 열기</button>
    <button class="btn-secondary" data-nav="home">뒤로</button>
  </section>

  <!-- 캠프파이어 -->
  <section id="campfire" class="card">
    <p><strong>캠프파이어 채팅</strong></p>
    <div id="chat">
      <div class="msg"><div class="name">Emily</div>요즘 단절감을 느끼고 있어요.</div>
      <div class="msg"><div class="name">Alex</div>저도 그래요. 고요함이 그립지만 연결도 원해요.</div>
    </div>
    <input type="text" id="msgInput" placeholder="메시지를 입력하세요…" style="width:80%">
    <button class="btn-primary" id="sendMsg">보내기</button>
    <br><br>
    <button class="btn-secondary" data-nav="home">완료</button>
  </section>
</main>
<footer>
  <div class="navbar">
    <button data-nav="home" class="active">홈</button>
    <button data-nav="editor">쓰기</button>
    <button data-nav="map">맵</button>
  </div>
</footer>
</div>

<script>
// 네비게이션
const sections = document.querySelectorAll("main section");
const navBtns = document.querySelectorAll("[data-nav]");
function go(id){
  sections.forEach(s => s.classList.toggle("active", s.id === id));
  navBtns.forEach(b => b.classList.toggle("active", b.dataset.nav === id));
}
navBtns.forEach(b => b.addEventListener("click", () => go(b.dataset.nav)));

// 맵 불꽃 선택
let selectedCluster = null;
document.querySelectorAll(".flame").forEach(f=>{
  f.addEventListener("click", ()=>{
    document.querySelectorAll(".flame").forEach(fl=>fl.classList.remove("selected"));
    f.classList.add("selected");
    selectedCluster = f.dataset.cluster;
  });
});

// 캠프파이어 열기 버튼
document.getElementById("openCampfire").addEventListener("click", ()=>{
  if(selectedCluster){
    go("campfire");
  } else {
    alert("캠프파이어를 선택하세요.");
  }
});

// AI 요약 반영
document.querySelector('[data-nav="summary"]').addEventListener("click", ()=>{
  const txt = document.getElementById("entry").value.trim();
  document.getElementById("sumText").textContent = txt ? 
    `요약: "${txt.slice(0,30)}..."` : 
    "당신은 흐리고 단절된 기분을 느꼈으며, 조용하고 부드러운 연결을 원했습니다.";
});

// 채팅 보내기
document.getElementById("sendMsg").addEventListener("click", ()=>{
  const val = document.getElementById("msgInput").value.trim();
  if(!val) return;
  const div = document.createElement("div");
  div.className = "msg";
  div.innerHTML = `<div class="name">나</div>${val}`;
  document.getElementById("chat").appendChild(div);
  document.getElementById("msgInput").value = "";
});
</script>
</body>
</html>

